<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>نظام شجرة المجالات</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    .icon-card {
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      text-align: center;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #ddd;
    }
    .icon-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .step-title {
      margin-bottom: 20px;
      font-weight: bold;
      font-size: 1.5rem;
      color: #0d6efd;
    }
    .breadcrumb-path {
      margin-bottom: 20px;
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body class="p-4">

  <div id="step-container">

    <!-- عرض المسار الحالي -->
    <div id="breadcrumb" class="breadcrumb-path"></div>

    <!-- الخطوة 1: اختيار المجال -->
    <div id="step-main">
      <h2 class="text-center step-title">مرحبا بك في نظام التجميع<br>اختر المجال</h2>
      <div class="row g-3" id="main-icons"></div>
    </div>

    <!-- الخطوة 2: اختيار التخصص -->
    <div id="step-specialty" style="display:none;">
      <h2 class="text-center step-title">اختر التخصص</h2>
      <div class="row g-3" id="specialty-icons"></div>
      <button class="btn btn-secondary mt-3" id="back-to-main">العودة للمجالات</button>
    </div>

    <!-- الخطوة 3: اختيار الفرع -->
    <div id="step-branch" style="display:none;">
      <h2 class="text-center step-title">اختر الفرع</h2>
      <div class="row g-3" id="branch-icons"></div>
      <button class="btn btn-secondary mt-3" id="back-to-specialty">العودة للتخصصات</button>
    </div>

    <!-- الخطوة 4: اختيار التفصيل -->
    <div id="step-detail" style="display:none;">
      <h2 class="text-center step-title">اختر التفصيل</h2>
      <div class="row g-3" id="detail-icons"></div>

      <!-- أزرار التحكم -->
      <div class="mt-3 d-flex gap-2 flex-wrap">
        <button class="btn btn-secondary" id="back-to-branch">العودة للفروع</button>
        <button class="btn btn-primary" id="btn-requests">الطلبات</button>
        <button class="btn btn-success" id="btn-work-form">استمارة العمل</button>
        <button class="btn btn-warning" id="btn-work-contract">عقد العمل</button>
        <button class="btn btn-warning" id="btn-work-wofer">العروض</button>
      </div>
    </div>
  </div>

  <script>
    const data = [
     // ----------------- المجال الهندسي -----------------
     { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "المساحة", detail: "رفع مساحي للمشاريع الهندسية" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "المساحة", detail: "مسح التصرفات (بيع، شراء، تأجير)" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "المساحة", detail: "قضايا النزاع" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "المساحة", detail: "تقسيم بين الورثة" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "المساحة", detail: "شبكات التثليث" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "الإنشاءات", detail: "التصميم الإنشائي" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "الإنشاءات", detail: "الإشراف" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "الإنشاءات", detail: "التنفيذ" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "الإنشاءات", detail: "فحص واختبار المواد" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "الإنشاءات", detail: "الصيانة والترميم" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "الإنشاءات", detail: "تثمين العقارات" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "الطرق والمواصلات", detail: "تخطيط النقل وهندسة المرور" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "الطرق والمواصلات", detail: "إنشاء وتنفيذ الطرق" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "الطرق والمواصلات", detail: "صيانة الرصف" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "ميكانيكا التربة", detail: "استكشاف الموقع واختبارات التربة" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "ميكانيكا التربة", detail: "تحليل استقرار المنحدرات" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "ميكانيكا التربة", detail: "تحسين خواص التربة" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة الموارد المائية", detail: "تصميم وتشييد السدود" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة الموارد المائية", detail: "تصميم شبكات المياه والصرف الصحي" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة الموارد المائية", detail: "تحلية المياه" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة الموارد المائية", detail: "الهيدرولوجيا (دراسة دورات المياه)" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة الموارد المائية", detail: "معالجة المياه والصرف الصحي" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة الموارد المائية", detail: "التقييم البيئي للمشاريع" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة وإدارة التشييد", detail: "تخطيط وجدولة المشاريع" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة وإدارة التشييد", detail: "تقدير التكاليف وضبط الميزانية" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة وإدارة التشييد", detail: "إدارة العقود والمشتريات" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة وإدارة التشييد", detail: "إدارة السلامة والصحة المهنية" },
      { main: "المجال الهندسي", spec: "الهندسة المدنية", branch: "هندسة وإدارة التشييد", detail: "إدارة الجودة في التشييد" },
      { main: "المجال الهندسي", spec: "الهندسة المعمارية", branch: "تصميم المباني", detail: "تصميم مباني سكنية" },
      { main: "المجال الهندسي", spec: "الهندسة المعمارية", branch: "تصميم المباني", detail: "تصميم مباني مؤسسية (مستشفيات، مدارس)" },
      { main: "المجال الهندسي", spec: "الهندسة المعمارية", branch: "تصميم المباني", detail: "تصميم مباني ثقافية وتجارية" },
      { main: "المجال الهندسي", spec: "الهندسة المعمارية", branch: "التصميم الداخلي والديكور", detail: "" },

      // ----------------- المجال القانوني -----------------
      { main: "المجال القانوني", spec: "القضايا والمعاملات المدنية", branch: " الملكية العقارية", detail: " توثيق عقود التصرفات (البيع، الشراء، التأجير)" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات المدنية", branch: " الملكية العقارية", detail: "قضايا النزاع العقاري" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات المدنية", branch: " الملكية العقارية", detail: "قسمة التركات بين الورثة" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات المدنية", branch: "صياغة العقود المدنية", detail: "مراجعة العقود والاتفاقيات" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات المدنية", branch: "صياغة العقود المدنية", detail: "التوثيق والتسجيل القانوني" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات المدنية", branch: "المسؤولية المدنية والتعويضات", detail: "دعاوى الأضرار والحوادث" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات المدنية", branch: "المسؤولية المدنية والتعويضات", detail: "التعويض عن الإخلال بالعقد" },

      { main: "المجال القانوني", spec: "القضايا الجنائية", branch: "الجرائم الجسيمة", detail: "جرائم القتل والاعتداءات الخطيرة" },
      { main: "المجال القانوني", spec: "القضايا الجنائية", branch: "الجرائم الجسيمة", detail: "التحقيقات الجنائية والمحاكمات" },
      { main: "المجال القانوني", spec: "القضايا الجنائية", branch: "الجرائم المالية والاقتصادية", detail: "جرائم التزوير والاحتيال" },
      { main: "المجال القانوني", spec: "القضايا الجنائية", branch: "الجرائم المالية والاقتصادية", detail: "غسل الأموال والرشوة" },
      { main: "المجال القانوني", spec: "القضايا الجنائية", branch: "الجرائم الإلكترونية", detail: "اختراق الأنظمة وسرقة البيانات" },
      { main: "المجال القانوني", spec: "القضايا الجنائية", branch: "الجرائم الإلكترونية", detail: "الابتزاز الإلكتروني والتشهير" },

      { main: "المجال القانوني", spec: "قضايا الأحوال الشخصية", branch: "الزواج والطلاق", detail: "عقود الزواج والاتفاقات السابقة" },
      { main: "المجال القانوني", spec: "قضايا الأحوال الشخصية", branch: "الزواج والطلاق", detail: "إجراءات الطلاق والتفريق القضائي" },
      { main: "المجال القانوني", spec: "قضايا الأحوال الشخصية", branch: "النفقة والحضانة", detail: "تحديد النفقة الزوجية ونفقة الأبناء" },
      { main: "المجال القانوني", spec: "قضايا الأحوال الشخصية", branch: "النفقة والحضانة", detail: "قضايا الحضانة والزيارة" },
      { main: "المجال القانوني", spec: "قضايا الأحوال الشخصية", branch: "الميراث والوصايا", detail: "تقسيم التركات وفق الشريعة أو القانون" },
      { main: "المجال القانوني", spec: "قضايا الأحوال الشخصية", branch: "الميراث والوصايا", detail: "الطعون في الوصايا والنزاعات بين الورثة" },

      { main: "المجال القانوني", spec: "القضايا والمعاملات التجارية", branch: "تأسيس الشركات", detail: "تسجيل الشركات وتوثيق الأنظمة الأساسية" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات التجارية", branch: "تأسيس الشركات", detail: "عقود الشراكة والاندماج" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات التجارية", branch: "المعاملات التجارية", detail: "عقود البيع والشراء التجارية" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات التجارية", branch: "المعاملات التجارية", detail: "الأوراق التجارية (الشيكات، الكمبيالات)" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات التجارية", branch: "الإفلاس والتصفية", detail: "إجراءات الإفلاس وإعادة الهيكلة" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات التجارية", branch: "الإفلاس والتصفية", detail: "تصفية الشركات وتوزيع الأصول" },

      { main: "المجال القانوني", spec: "القضايا والمعاملات الإدارية", branch: "القرارات الإدارية", detail: "الطعن في القرارات الحكومية" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات الإدارية", branch: "القرارات الإدارية", detail: "الرقابة القضائية على الإدارة" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات الإدارية", branch: "العقود الإدارية", detail: "صياغة وتنفيذ العقود الحكومية" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات الإدارية", branch: "العقود الإدارية", detail: "فض النزاعات في العقود الإدارية" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات الإدارية", branch: "الوظيفة العامة", detail: "التعيين والترقية والانضباط" },
      { main: "المجال القانوني", spec: "القضايا والمعاملات الإدارية", branch: "الوظيفة العامة", detail: "قضايا الفصل والتظلمات الوظيفية" },

      { main: "المجال القانوني", spec: "الملكية الفكرية", branch: "حقوق المؤلف والنشر", detail: "حماية الكتب والمحتوى الرقمي" },
      { main: "المجال القانوني", spec: "الملكية الفكرية", branch: "حقوق المؤلف والنشر", detail: "قضايا النسخ والانتحال" },
      { main: "المجال القانوني", spec: "الملكية الفكرية", branch: "براءات الاختراع", detail: "تسجيل الابتكارات والاختراعات" },
      { main: "المجال القانوني", spec: "الملكية الفكرية", branch: "براءات الاختراع", detail: "الطعون في صلاحية البراءة" },
      { main: "المجال القانوني", spec: "الملكية الفكرية", branch: "العلامات التجارية", detail: "تسجيل العلامات والشعارات" },
      { main: "المجال القانوني", spec: "الملكية الفكرية", branch: "العلامات التجارية", detail: "النزاعات حول التقليد والتشابه" },

      { main: "المجال القانوني", spec: "القانون الدولي", branch: "القانون الدولي العام", detail: "المعاهدات والاتفاقيات الدولية" },
      { main: "المجال القانوني", spec: "القانون الدولي", branch: "القانون الدولي العام", detail: "قضايا حقوق الإنسان والنزاعات بين الدول" },
      { main: "المجال القانوني", spec: "القانون الدولي", branch: "القانون الدولي الخاص", detail: "النزاعات بين الأفراد من جنسيات مختلفة" },
      { main: "المجال القانوني", spec: "القانون الدولي", branch: "القانون الدولي الخاص", detail: "تنفيذ الأحكام الأجنبية والتحكيم الدولي" },
      { main: "المجال القانوني", spec: "القانون الدولي", branch: "القانون الإنساني الدولي", detail: "حماية المدنيين أثناء النزاعات المسلحة" },
      { main: "المجال القانوني", spec: "القانون الدولي", branch: "القانون الإنساني الدولي", detail: "جرائم الحرب والعدالة الدولية" },
      // ----------------- مجال القضاء والتحكيم -----------------
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "المحاكم والنيابات", branch: "", detail: "" },
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "مبادرات خاصة في التحكيم والصلح", branch: "التحكيم العقاري", detail: "تسوية قضايا التصرفات (البيع، الشراء، الإيجارات) والمنازعات السكنية" },
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "مبادرات خاصة في التحكيم والصلح", branch: "التحكيم العقاري", detail: "فض النزاعات حول الملكية العقارية" },
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "مبادرات خاصة في التحكيم والصلح", branch: "التحكيم العقاري", detail: "التحكيم في قسمة التركات العقارية" },
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "مبادرات خاصة في التحكيم والصلح", branch: "التحكيم التجاري", detail: "التحكيم وفض النزاع بين الشركات التجارية" },
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "مبادرات خاصة في التحكيم والصلح", branch: "التحكيم التجاري", detail: "التحكيم وفض النزاع بين الشركاء" },
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "مبادرات خاصة في التحكيم والصلح", branch: "التحكيم التجاري", detail: "التصفيات وتوزيع الاصول" },
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "مبادرات خاصة في التحكيم والصلح", branch: "التحكيم الأسري", detail: "حل النزاعات الزوجية خارج المحاكم" },
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "مبادرات خاصة في التحكيم والصلح", branch: "التحكيم الأسري", detail: "تسوية قضايا الحضانة والنفقة بالتراضي" },
      { main: "مجال القضاء والتحكيم وفض النزاعات", spec: "مبادرات خاصة في التحكيم والصلح", branch: "التحكيم الأسري", detail: "إدارة جلسات الصلح بين أفراد الأسرة" },

     // ----------------- 🏗️ المجال الجديد: المقاولات -----------------
      // التخصص 1: المناقصات وإدارة المشاريع
      { main: "المقاولات", spec: "المناقصات وإدارة المشاريع", branch: "المناقصات والتوريدات", detail: "جداول الكميات والعطاءات وتحليل الأسعار" },
      { main: "المقاولات", spec: "المناقصات وإدارة المشاريع", branch: "المناقصات والتوريدات", detail: "توريد المواد والمشتريات" },
      { main: "المقاولات", spec: "المناقصات وإدارة المشاريع", branch: "المناقصات والتوريدات", detail: "ضبط التكاليف ومراقبة الميزانية" },
      { main: "المقاولات", spec: "المناقصات وإدارة المشاريع", branch: "إدارة المشروع والمخططات", detail: "إعداد الجداول الزمنية للمشروع" },
      { main: "المقاولات", spec: "المناقصات وإدارة المشاريع", branch: "إدارة المشروع والمخططات", detail: "مراجعة المخططات الهندسية والتنفيذية" },
      { main: "المقاولات", spec: "المناقصات وإدارة المشاريع", branch: "إدارة المشروع والمخططات", detail: "الاشراف ومتابعة التنفيذ" },

      // التخصص 2: الأعمال الإنشائية والمعمارية
      { main: "المقاولات", spec: "الأعمال الإنشائية والمعمارية", branch: "أعمال الأساسات والهيكل الإنشائي", detail: "الحفر والردم وتسوية الأرض" },
      { main: "المقاولات", spec: "الأعمال الإنشائية والمعمارية", branch: "أعمال الأساسات والهيكل الإنشائي", detail: "تنفيذ القواعد والأعمدة والأسقف" },
      { main: "المقاولات", spec: "الأعمال الإنشائية والمعمارية", branch: "أعمال الأساسات والهيكل الإنشائي", detail: "معالجة الخرسانة وفك الشدات" },
      { main: "المقاولات", spec: "الأعمال الإنشائية والمعمارية", branch: "أعمال البناء والتشطيبات الأساسية", detail: "أعمال الطوب والبناء" },
      { main: "المقاولات", spec: "الأعمال الإنشائية والمعمارية", branch: "أعمال البناء والتشطيبات الأساسية", detail: "اللياسة والدهانات" },
      { main: "المقاولات", spec: "الأعمال الإنشائية والمعمارية", branch: "أعمال البناء والتشطيبات الأساسية", detail: "تركيب الأرضيات والسيراميك" },
      { main: "المقاولات", spec: "الأعمال الإنشائية والمعمارية", branch: "أعمال المعمار والديكور", detail: "تنفيذ الأسقف الجبسية والديكورات" },
      { main: "المقاولات", spec: "الأعمال الإنشائية والمعمارية", branch: "أعمال المعمار والديكور", detail: "تركيب الأبواب والنوافذ" },
      { main: "المقاولات", spec: "الأعمال الإنشائية والمعمارية", branch: "أعمال المعمار والديكور", detail: "التشطيبات النهائية والتسليم" },

      // التخصص 3: الأعمال الكهربائية والميكانيكية والتشطيبات
      { main: "المقاولات", spec: "الأعمال الكهربائية والميكانيكية والتشطيبات", branch: "الأعمال الكهربائية", detail: "تمديد الكابلات ولوحات التوزيع" },
      { main: "المقاولات", spec: "الأعمال الكهربائية والميكانيكية والتشطيبات", branch: "الأعمال الكهربائية", detail: "تركيب الإنارة والمفاتيح" },
      { main: "المقاولات", spec: "الأعمال الكهربائية والميكانيكية والتشطيبات", branch: "الأعمال الكهربائية", detail: "أنظمة التأريض والحماية" },
      { main: "المقاولات", spec: "الأعمال الكهربائية والميكانيكية والتشطيبات", branch: "الأعمال الميكانيكية والسباكة", detail: "تمديدات المياه والصرف الصحي" },
      { main: "المقاولات", spec: "الأعمال الكهربائية والميكانيكية والتشطيبات", branch: "الأعمال الميكانيكية والسباكة", detail: "تركيب المضخات والخزانات" },
      { main: "المقاولات", spec: "الأعمال الكهربائية والميكانيكية والتشطيبات", branch: "الأعمال الميكانيكية والسباكة", detail: "أنظمة التكييف والتهوية" },
      { main: "المقاولات", spec: "الأعمال الكهربائية والميكانيكية والتشطيبات", branch: "التجهيزات النهائية والتسليم", detail: "اختبار الأنظمة وتسليم المشروع" },
      { main: "المقاولات", spec: "الأعمال الكهربائية والميكانيكية والتشطيبات", branch: "التجهيزات النهائية والتسليم", detail: "إعداد تقرير التسليم النهائي" },

      // ----------------- 💼 المجال المالي والإداري -----------------
{ main: "المجال المالي والإداري", spec: "الشؤون المالية والمحاسبية", branch: "المحاسبة والتقارير المالية", detail: "تسجيل العمليات المالية" },
{ main: "المجال المالي والإداري", spec: "الشؤون المالية والمحاسبية", branch: "المحاسبة والتقارير المالية", detail: "إعداد القوائم المالية الدورية" },
{ main: "المجال المالي والإداري", spec: "الشؤون المالية والمحاسبية", branch: "المحاسبة والتقارير المالية", detail: "مراجعة الحسابات والامتثال المالي" },

{ main: "المجال المالي والإداري", spec: "الشؤون المالية والمحاسبية", branch: "إدارة الميزانية والتحليل المالي", detail: "إعداد الموازنات التقديرية" },
{ main: "المجال المالي والإداري", spec: "الشؤون المالية والمحاسبية", branch: "إدارة الميزانية والتحليل المالي", detail: "تحليل التكاليف والعوائد" },
{ main: "المجال المالي والإداري", spec: "الشؤون المالية والمحاسبية", branch: "إدارة الميزانية والتحليل المالي", detail: "مراقبة الإنفاق وتخصيص الموارد" },

{ main: "المجال المالي والإداري", spec: "الشؤون المالية والمحاسبية", branch: "إدارة المشتريات والمخزون", detail: "التوريد والتعاقدات" },
{ main: "المجال المالي والإداري", spec: "الشؤون المالية والمحاسبية", branch: "إدارة المشتريات والمخزون", detail: "إدارة المخزون والمواد" },
{ main: "المجال المالي والإداري", spec: "الشؤون المالية والمحاسبية", branch: "إدارة المشتريات والمخزون", detail: "مراقبة دورة الشراء والتخزين" },

{ main: "المجال المالي والإداري", spec: "الموارد البشرية", branch: "إدارة الموارد البشرية", detail: "التوظيف والتعيين" },
{ main: "المجال المالي والإداري", spec: "الموارد البشرية", branch: "إدارة الموارد البشرية", detail: "التدريب والتطوير المهني" },
{ main: "المجال المالي والإداري", spec: "الموارد البشرية", branch: "إدارة الموارد البشرية", detail: "تقييم الأداء والتحفيز" },

{ main: "المجال المالي والإداري", spec: "الموارد البشرية", branch: "إدارة العمليات والخدمات العامة", detail: "تنظيم سير العمل الداخلي" },
{ main: "المجال المالي والإداري", spec: "الموارد البشرية", branch: "إدارة العمليات والخدمات العامة", detail: "تحسين جودة الخدمات والإجراءات" },
{ main: "المجال المالي والإداري", spec: "الموارد البشرية", branch: "إدارة العمليات والخدمات العامة", detail: "إدارة الوقت والمهام التشغيلية" },


// ----------------- 📰 المجال الإعلامي والدعائي -----------------
{ main: "المجال الإعلامي والدعائي", spec: "الإنتاج الإعلامي", branch: "التصوير الفوتوغرافي والفيديو", detail: "تصوير الفعاليات والمناسبات" },
{ main: "المجال الإعلامي والدعائي", spec: "الإنتاج الإعلامي", branch: "التصوير الفوتوغرافي والفيديو", detail: "تصوير المنتجات والدعاية" },
{ main: "المجال الإعلامي والدعائي", spec: "الإنتاج الإعلامي", branch: "التصوير الفوتوغرافي والفيديو", detail: "إعداد التقارير الميدانية" },

{ main: "المجال الإعلامي والدعائي", spec: "الإنتاج الإعلامي", branch: "المونتاج والمؤثرات البصرية", detail: "تحرير الفيديوهات" },
{ main: "المجال الإعلامي والدعائي", spec: "الإنتاج الإعلامي", branch: "المونتاج والمؤثرات البصرية", detail: "إضافة المؤثرات الصوتية والبصرية" },
{ main: "المجال الإعلامي والدعائي", spec: "الإنتاج الإعلامي", branch: "المونتاج والمؤثرات البصرية", detail: "إنتاج الفيديوهات الترويجية" },

{ main: "المجال الإعلامي والدعائي", spec: "الإنتاج الإعلامي", branch: "إدارة البث والاستوديوهات", detail: "البث المباشر" },
{ main: "المجال الإعلامي والدعائي", spec: "الإنتاج الإعلامي", branch: "إدارة البث والاستوديوهات", detail: "إدارة المعدات الفنية" },
{ main: "المجال الإعلامي والدعائي", spec: "الإنتاج الإعلامي", branch: "إدارة البث والاستوديوهات", detail: "تسجيل البرامج" },

// التصميم والإبداع البصري
{ main: "المجال الإعلامي والدعائي", spec: "التصميم والإبداع البصري", branch: "التصميم الجرافيكي", detail: "تصميم الشعارات والهويات" },
{ main: "المجال الإعلامي والدعائي", spec: "التصميم والإبداع البصري", branch: "التصميم الجرافيكي", detail: "الإعلانات المطبوعة والرقمية" },
{ main: "المجال الإعلامي والدعائي", spec: "التصميم والإبداع البصري", branch: "التصميم الجرافيكي", detail: "واجهات المستخدم" },

{ main: "المجال الإعلامي والدعائي", spec: "التصميم والإبداع البصري", branch: "الأنيميشن والموشن جرافيك", detail: "تحريك الشخصيات" },
{ main: "المجال الإعلامي والدعائي", spec: "التصميم والإبداع البصري", branch: "الأنيميشن والموشن جرافيك", detail: "فيديوهات توعوية وترويجية" },
{ main: "المجال الإعلامي والدعائي", spec: "التصميم والإبداع البصري", branch: "الأنيميشن والموشن جرافيك", detail: "رسوم متحركة ثنائية وثلاثية الأبعاد" },

{ main: "المجال الإعلامي والدعائي", spec: "التصميم والإبداع البصري", branch: "الإخراج الفني والهوية البصرية", detail: "توجيه الحملات الإبداعية" },
{ main: "المجال الإعلامي والدعائي", spec: "التصميم والإبداع البصري", branch: "الإخراج الفني والهوية البصرية", detail: "تطوير الهوية المؤسسية" },
{ main: "المجال الإعلامي والدعائي", spec: "التصميم والإبداع البصري", branch: "الإخراج الفني والهوية البصرية", detail: "التنسيق بين فرق الإنتاج" },

// الاتصال والتسويق الإعلامي
{ main: "المجال الإعلامي والدعائي", spec: "الاتصال والتسويق الإعلامي", branch: "الصحافة والتحرير الرقمي", detail: "كتابة الأخبار والتقارير" },
{ main: "المجال الإعلامي والدعائي", spec: "الاتصال والتسويق الإعلامي", branch: "الصحافة والتحرير الرقمي", detail: "التحقيقات الصحفية" },
{ main: "المجال الإعلامي والدعائي", spec: "الاتصال والتسويق الإعلامي", branch: "الصحافة والتحرير الرقمي", detail: "إدارة النشرات والمجلات" },

{ main: "المجال الإعلامي والدعائي", spec: "الاتصال والتسويق الإعلامي", branch: "الدعاية والإعلان", detail: "كتابة النصوص الإعلانية" },
{ main: "المجال الإعلامي والدعائي", spec: "الاتصال والتسويق الإعلامي", branch: "الدعاية والإعلان", detail: "تصميم الحملات الدعائية" },
{ main: "المجال الإعلامي والدعائي", spec: "الاتصال والتسويق الإعلامي", branch: "الدعاية والإعلان", detail: "التسويق الإلكتروني" },

{ main: "المجال الإعلامي والدعائي", spec: "الاتصال والتسويق الإعلامي", branch: "العلاقات العامة والإعلام المؤسسي", detail: "إدارة السمعة والأزمات" },
{ main: "المجال الإعلامي والدعائي", spec: "الاتصال والتسويق الإعلامي", branch: "العلاقات العامة والإعلام المؤسسي", detail: "تنظيم المؤتمرات والفعاليات" },
{ main: "المجال الإعلامي والدعائي", spec: "الاتصال والتسويق الإعلامي", branch: "العلاقات العامة والإعلام المؤسسي", detail: "التواصل والتنسيق مع الجهات الإعلامية" }


   
    ];

    const unique = (arr, key) => [...new Set(arr.map(x => x[key]))];

    // استرجاع وحفظ الحالة في localStorage
    function saveState(key, value) { localStorage.setItem(key, value); }
    function getState(key) { return localStorage.getItem(key); }

    let selectedMain = getState("selectedMain") || "";
    let selectedSpec = getState("selectedSpec") || "";
    let selectedBranch = getState("selectedBranch") || "";
    let selectedDetail = getState("selectedDetail") || "";

    function updateBreadcrumb() {
      let path = selectedMain;
      if (selectedSpec) path += " \\ " + selectedSpec;
      if (selectedBranch) path += " \\ " + selectedBranch;
      if (selectedDetail) path += " \\ " + selectedDetail;
      $("#breadcrumb").text(path);
    }

    // ------------------ الخطوة 1: عرض المجالات ------------------
    function renderMainIcons() {
      const mains = unique(data, "main");
      $("#main-icons").empty();
      mains.forEach(m => {
        $("#main-icons").append(`
          <div class="col-md-3">
            <div class="icon-card" data-main="${m}">
              <i class="bi bi-grid-1x2" style="font-size:2rem"></i>
              <div>${m}</div>
            </div>
          </div>
        `);
      });
    }

    $(document).on("click", ".icon-card[data-main]", function() {
      selectedMain = $(this).data("main");
      saveState("selectedMain", selectedMain);
      selectedSpec = ""; selectedBranch = ""; selectedDetail = "";
      saveState("selectedSpec",""); saveState("selectedBranch",""); saveState("selectedDetail","");
      renderSpecialtyIcons(selectedMain);
      $("#step-main").hide();
      $("#step-specialty").show();
      updateBreadcrumb();
    });

    // ------------------ الخطوة 2: عرض التخصصات ------------------
    function renderSpecialtyIcons(main) {
      const specs = unique(data.filter(x => x.main === main), "spec");
      $("#specialty-icons").empty();
      specs.forEach(s => {
        $("#specialty-icons").append(`
          <div class="col-md-3">
            <div class="icon-card" data-spec="${s}" data-main="${main}">
              <div>${s}</div>
            </div>
          </div>
        `);
      });
    }

    $(document).on("click", ".icon-card[data-spec]", function() {
      selectedSpec = $(this).data("spec");
      saveState("selectedSpec", selectedSpec);
      selectedBranch = ""; selectedDetail = "";
      saveState("selectedBranch",""); saveState("selectedDetail","");
      renderBranchIcons(selectedMain, selectedSpec);
      $("#step-specialty").hide();
      $("#step-branch").show();
      updateBreadcrumb();
    });

    $("#back-to-main").click(function() {
      $("#step-specialty").hide();
      $("#step-main").show();
      selectedSpec = ""; selectedBranch = ""; selectedDetail = "";
      saveState("selectedSpec",""); saveState("selectedBranch",""); saveState("selectedDetail","");
      updateBreadcrumb();
    });

    // ------------------ الخطوة 3: عرض الفروع ------------------
    function renderBranchIcons(main, spec) {
      const branches = unique(data.filter(x => x.main === main && x.spec === spec), "branch");
      $("#branch-icons").empty();
      branches.forEach(b => {
        $("#branch-icons").append(`
          <div class="col-md-3">
            <div class="icon-card" data-branch="${b}" data-spec="${spec}" data-main="${main}">
              <div>${b || "---"}</div>
            </div>
          </div>
        `);
      });
    }

    $(document).on("click", ".icon-card[data-branch]", function() {
      selectedBranch = $(this).data("branch");
      saveState("selectedBranch", selectedBranch);
      selectedDetail = "";
      saveState("selectedDetail","");
      renderDetailIcons(selectedMain, selectedSpec, selectedBranch);
      $("#step-branch").hide();
      $("#step-detail").show();
      updateBreadcrumb();
    });

    $("#back-to-specialty").click(function() {
      $("#step-branch").hide();
      $("#step-specialty").show();
      selectedBranch = ""; selectedDetail = "";
      saveState("selectedBranch",""); saveState("selectedDetail","");
      updateBreadcrumb();
    });

    // ------------------ الخطوة 4: عرض التفاصيل ------------------
    function renderDetailIcons(main, spec, branch) {
      const details = unique(data.filter(x =>
        x.main === main && x.spec === spec && x.branch === branch
      ), "detail");
      $("#detail-icons").empty();
      details.forEach(d => {
        $("#detail-icons").append(`
          <div class="col-md-3">
            <div class="icon-card" data-detail="${d}">
              <div>${d || "---"}</div>
            </div>
          </div>
        `);
      });
    }

    $(document).on("click", ".icon-card[data-detail]", function() {
      selectedDetail = $(this).data("detail");
      saveState("selectedDetail", selectedDetail);
      updateBreadcrumb();
    });

    $("#back-to-branch").click(function() {
      $("#step-detail").hide();
      $("#step-branch").show();
      selectedDetail = "";
      saveState("selectedDetail","");
      updateBreadcrumb();
    });

    // ------------------ أزرار الطلبات واستعراض المستندات ------------------
$("#btn-requests").click(() => {
  let path = `${selectedMain}\\${selectedSpec}\\${selectedBranch}\\${selectedDetail}`;
  let encodedPath = encodeURIComponent(path);

  // التوجيه حسب خيار المستخدم
  if (selectedDetail === "قضايا النزاع") {
    window.location.href = `createform.html?path=${encodedPath}`;
  } 
  else if (selectedDetail === "قضايا النزاع العقاري") {
    window.location.href = `createform.html?path=${encodedPath}`;
  } 
  else if (selectedDetail === "تقسيم بين الورثة") {
    window.location.href = `createdevided.html?path=${encodedPath}`;
  } 
  else if (selectedDetail === "قسمة التركات بين الورثة") {
    window.location.href = `createdevided.html?path=${encodedPath}`;
  } 
  else if (selectedDetail === "مسح التصرفات (بيع، شراء، تأجير)") {
    window.location.href = `createorder.html?path=${encodedPath}`;
  } 
  else if (selectedDetail === "شبكات التثليث") {
    window.location.href = `createspece.html?path=${encodedPath}`;
  } 
  else if (selectedDetail === "رفع مساحي للمشاريع الهندسية") {
    window.location.href = `createspece.html?path=${encodedPath}`;
  } 
  else {
    window.location.href = `createspece.html?path=${encodedPath}`;
  }
});
   // ------------------ أزرار الطلبات واستعراض المستندات ------------------
   $("#btn-work-form").click(() => {
  let path = `${selectedMain}\\${selectedSpec}\\${selectedBranch}\\${selectedDetail}`;
  let encodedPath = encodeURIComponent(path);

  // التوجيه حسب خيار المستخدم
  if (selectedDetail === "مسح التصرفات (بيع، شراء، تأجير)") {
    window.location.href = `Work_Form.html?path=${encodedPath}`;
  } 
  else {
    window.location.href = `Work_Form1.html?path=${encodedPath}`;
  }
});

$("#btn-work-contract").click(() => {
  let path = `${selectedMain}\\${selectedSpec}\\${selectedBranch}\\${selectedDetail}`;
  let encodedPath = encodeURIComponent(path);

  // التوجيه حسب خيار المستخدم
  if (selectedDetail === "مسح التصرفات (بيع، شراء، تأجير)") {
    window.location.href = `ContractTemplate.html?path=${encodedPath}`;
  } 
  else {
    window.location.href = `ContractTemplate1.html?path=${encodedPath}`;
  }
});

$("#btn-work-wofer").click(() => {
  let path = `${selectedMain}\\${selectedSpec}\\${selectedBranch}\\${selectedDetail}`;
  let encodedPath = encodeURIComponent(path);

  // التوجيه حسب خيار المستخدم
  if (selectedDetail === "مسح التصرفات (بيع، شراء، تأجير)") {
    window.location.href = `WorkOffer.html?path=${encodedPath}`;
  } 
  else {
    window.location.href = `WorkOffer1.html?path=${encodedPath}`;
  }
});
// الصفحات الأخرى تبقى كما هي


//$("#btn-work-wofer").click(() => window.location.href = "WorkOffer1.html");


    // ------------------ استعادة الحالة عند تحميل الصفحة ------------------
    $(document).ready(function() {
      updateBreadcrumb();
      if (selectedMain && !selectedSpec) {
        renderSpecialtyIcons(selectedMain);
        $("#step-main").hide(); $("#step-specialty").show();
      }
      if (selectedMain && selectedSpec && !selectedBranch) {
        renderSpecialtyIcons(selectedMain);
        renderBranchIcons(selectedMain, selectedSpec);
        $("#step-main").hide(); $("#step-specialty").hide(); $("#step-branch").show();
      }
      if (selectedMain && selectedSpec && selectedBranch) {
        renderSpecialtyIcons(selectedMain);
        renderBranchIcons(selectedMain, selectedSpec);
        renderDetailIcons(selectedMain, selectedSpec, selectedBranch);
        $("#step-main").hide(); $("#step-specialty").hide(); $("#step-branch").hide(); $("#step-detail").show();
      }
    });

    renderMainIcons();
  </script>

</body>
</html>
